console.log("working");var languages=[{code:0,name:"Language"},{code:"ar",name:"Arabic"},{code:"de",name:"German"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"he",name:"Hebrew"},{code:"it",name:"Italian"},{code:"nl",name:"Dutch"},{code:"no",name:"Norwegian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"se",name:"Northern Sami"},{code:"zh",name:"Chinese"}],countrys=[{code:0,name:"Country"},{code:"ar",name:"Argentina"},{code:"au",name:"Australia"},{code:"at",name:"Austria"},{code:"be",name:"Belgium"},{code:"br",name:"Brazil"},{code:"bg",name:"Bulgaria"},{code:"ca",name:"Canada"},{code:"cn",name:"China"},{code:"co",name:"Colombia"},{code:"cu",name:"Cuba"},{code:"cz",name:"Czechia"},{code:"eg",name:"Egypt"},{code:"fr",name:"France"},{code:"de",name:"Germany"},{code:"gr",name:"Greece"},{code:"hk",name:"Hong Kong"},{code:"hu",name:"Hungary"},{code:"in",name:"India"},{code:"id",name:"Indonesia"},{code:"ie",name:"Ireland"},{code:"il",name:"Israel"},{code:"it",name:"Italy"},{code:"jp",name:"Japan"},{code:"kr",name:"Korea"},{code:"lv",name:"Latvia"},{code:"lt",name:"Lithuania"},{code:"my",name:"Malaysia"},{code:"mx",name:"Mexico"},{code:"ma",name:"Morocco"},{code:"nl",name:"Netherlands"},{code:"nz",name:"New Zealand"},{code:"ng",name:"Nigeria"},{code:"no",name:"Norway"},{code:"ph",name:"Philippines"},{code:"pl",name:"Poland"},{code:"pt",name:"Portugal"},{code:"ro",name:"Romania"},{code:"ru",name:"Russian Federation"},{code:"sa",name:"Saudi Arabia"},{code:"rs",name:"Serbia"},{code:"sg",name:"Singapore"},{code:"sk",name:"Slovakia"},{code:"si",name:"Slovenia"},{code:"za",name:"South Africa"},{code:"se",name:"Sweden"},{code:"ch",name:"Switzerland"},{code:"tw",name:"Taiwan"},{code:"th",name:"Thailand"},{code:"tr",name:"Turkey"},{code:"ua",name:"Ukraine"},{code:"ae",name:"United Arab Emirates"},{code:"gb",name:"United Kingdom"},{code:"us",name:"United States"},{code:"ve",name:"Venezuela"}],categorys=[{code:0,name:"Category"},{code:"business",name:"Business"},{code:"entertainment",name:"Entertainment"},{code:"general",name:"General"},{code:"health",name:"Health"},{code:"science",name:"Science"},{code:"sports",name:"Sports"},{code:"technology",name:"Technology"}],sources=[{code:0,name:"Source"},{code:"abc-news",name:"ABC News"},{code:"abc-news-au",name:"ABC News (AU)"},{code:"aftenposten",name:"Aftenposten"},{code:"al-jazeera-english",name:"Al Jazeera English"},{code:"ansa",name:"ANSA.it"},{code:"argaam",name:"Argaam"},{code:"ars-technica",name:"Ars Technica"},{code:"ary-news",name:"Ary News"},{code:"associated-press",name:"Associated Press"},{code:"australian-financial-review",name:"Australian Financial Review"},{code:"axios",name:"Axios"},{code:"bbc-news",name:"BBC News"},{code:"bbc-sport",name:"BBC Sport"},{code:"bild",name:"Bild"},{code:"blasting-news-br",name:"Blasting News (BR)"},{code:"bleacher-report",name:"Bleacher Report"},{code:"bloomberg",name:"Bloomberg"},{code:"breitbart-news",name:"Breitbart News"},{code:"business-inscodeer",name:"Business Inscodeer"},{code:"business-inscodeer-uk",name:"Business Inscodeer (UK)"},{code:"buzzfeed",name:"Buzzfeed"},{code:"cbc-news",name:"CBC News"},{code:"cbs-news",name:"CBS News"},{code:"cnbc",name:"CNBC"},{code:"cnn",name:"CNN"},{code:"cnn-es",name:"CNN Spanish"},{code:"crypto-coins-news",name:"Crypto Coins News"},{code:"der-tagesspiegel",name:"Der Tagesspiegel"},{code:"die-zeit",name:"Die Zeit"},{code:"el-mundo",name:"El Mundo"},{code:"engadget",name:"Engadget"},{code:"entertainment-weekly",name:"Entertainment Weekly"},{code:"espn",name:"ESPN"},{code:"espn-cric-info",name:"ESPN Cric Info"},{code:"financial-post",name:"Financial Post"},{code:"focus",name:"Focus"},{code:"football-italia",name:"Football Italia"},{code:"fortune",name:"Fortune"},{code:"four-four-two",name:"FourFourTwo"},{code:"fox-news",name:"Fox News"},{code:"fox-sports",name:"Fox Sports"},{code:"globo",name:"Globo"},{code:"google-news",name:"Google News"},{code:"google-news-ar",name:"Google News (Argentina)"},{code:"google-news-au",name:"Google News (Australia)"},{code:"google-news-br",name:"Google News (Brasil)"},{code:"google-news-ca",name:"Google News (Canada)"},{code:"google-news-fr",name:"Google News (France)"},{code:"google-news-in",name:"Google News (India)"},{code:"google-news-is",name:"Google News (Israel)"},{code:"google-news-it",name:"Google News (Italy)"},{code:"google-news-ru",name:"Google News (Russia)"},{code:"google-news-sa",name:"Google News (Saudi Arabia)"},{code:"google-news-uk",name:"Google News (UK)"},{code:"goteborgs-posten",name:"Göteborgs-Posten"},{code:"gruenderszene",name:"Gruenderszene"},{code:"hacker-news",name:"Hacker News"},{code:"handelsblatt",name:"Handelsblatt"},{code:"ign",name:"IGN"},{code:"il-sole-24-ore",name:"Il Sole 24 Ore"},{code:"independent",name:"Independent"},{code:"infobae",name:"Infobae"},{code:"info-money",name:"InfoMoney"},{code:"la-gaceta",name:"La Gaceta"},{code:"la-nacion",name:"La Nacion"},{code:"la-repubblica",name:"La Repubblica"},{code:"le-monde",name:"Le Monde"},{code:"lenta",name:"Lenta"},{code:"lequipe",name:"L'equipe"},{code:"les-echos",name:"Les Echos"},{code:"liberation",name:"Libération"},{code:"marca",name:"Marca"},{code:"mashable",name:"Mashable"},{code:"medical-news-today",name:"Medical News Today"},{code:"msnbc",name:"MSNBC"},{code:"mtv-news",name:"MTV News"},{code:"mtv-news-uk",name:"MTV News (UK)"},{code:"national-geographic",name:"National Geographic"},{code:"national-review",name:"National Review"},{code:"nbc-news",name:"NBC News"},{code:"news24",name:"News24"},{code:"new-scientist",name:"New Scientist"},{code:"news-com-au",name:"News.com.au"},{code:"newsweek",name:"Newsweek"},{code:"new-york-magazine",name:"New York Magazine"},{code:"next-big-future",name:"Next Big Future"},{code:"nfl-news",name:"NFL News"},{code:"nhl-news",name:"NHL News"},{code:"nrk",name:"NRK"},{code:"politico",name:"Politico"},{code:"polygon",name:"Polygon"},{code:"rbc",name:"RBC"},{code:"recode",name:"Recode"},{code:"reddit-r-all",name:"Reddit /r/all"},{code:"reuters",name:"Reuters"},{code:"rt",name:"RT"},{code:"rte",name:"RTE"},{code:"rtl-nieuws",name:"RTL Nieuws"},{code:"sabq",name:"SABQ"},{code:"spiegel-online",name:"Spiegel Online"},{code:"svenska-dagbladet",name:"Svenska Dagbladet"},{code:"t3n",name:"T3n"},{code:"talksport",name:"TalkSport"},{code:"techcrunch",name:"TechCrunch"},{code:"techcrunch-cn",name:"TechCrunch (CN)"},{code:"techradar",name:"TechRadar"},{code:"the-american-conservative",name:"The American Conservative"},{code:"the-globe-and-mail",name:"The Globe And Mail"},{code:"the-hill",name:"The Hill"},{code:"the-hindu",name:"The Hindu"},{code:"the-huffington-post",name:"The Huffington Post"},{code:"the-irish-times",name:"The Irish Times"},{code:"the-jerusalem-post",name:"The Jerusalem Post"},{code:"the-lad-bible",name:"The Lad Bible"},{code:"the-next-web",name:"The Next Web"},{code:"the-sport-bible",name:"The Sport Bible"},{code:"the-times-of-india",name:"The Times of India"},{code:"the-verge",name:"The Verge"},{code:"the-wall-street-journal",name:"The Wall Street Journal"},{code:"the-washington-post",name:"The Washington Post"},{code:"the-washington-times",name:"The Washington Times"},{code:"time",name:"Time"},{code:"usa-today",name:"USA Today"},{code:"vice-news",name:"Vice News"},{code:"wired",name:"Wired"},{code:"wired-de",name:"Wired.de"},{code:"wirtschafts-woche",name:"Wirtschafts Woche"},{code:"xinhua-net",name:"Xinhua Net"},{code:"ynet",name:"Ynet"}];console.log(languages),console.log(countrys),document.getElementById("category").innerHTML="";for(var i=0;i<categorys.length;i++)document.getElementById("category").innerHTML+='<option class="dropdown-item" value="'+categorys[i].code+'">'+categorys[i].name+"</option>";document.getElementById("country").innerHTML="";for(i=0;i<countrys.length;i++)document.getElementById("country").innerHTML+='<option class="dropdown-item" value="'+countrys[i].code+'">'+countrys[i].name+"</option>";document.getElementById("language").innerHTML="";for(i=0;i<languages.length;i++)document.getElementById("language").innerHTML+='<option class="dropdown-item" value="'+languages[i].code+'">'+languages[i].name+"</option>";document.getElementById("source").innerHTML="";for(i=0;i<sources.length;i++)document.getElementById("source").innerHTML+='<option class="dropdown-item" value="'+sources[i].code+'">'+sources[i].name+"</option>";var category,country,language,source,myKey=JSON.parse(apiKey);function buildURL(){var e="http://newsapi.org/v2/top-headlines?";console.log(e),console.log(category,country,source,language,search),0!=category&&null!=category&&(e+="category="+category+"&"),0!=country&&null!=country&&(e+="country="+country+"&"),0!=source&&null!=source&&(e+="sources="+source+"&"),0!=language&&null!=language&&(e+="language="+language+"&"),""!=search&&"[object HTMLInputElement]"!=search&&(e+="q="+search+"&"),"http://newsapi.org/v2/top-headlines?"===e&&(e+="country=nz&"),e+="apiKey="+myKey,console.log(e),print(e),console.log("urlDone")}function print(e){console.log("printURL"),$.ajax({url:e,type:"GET",data:"json",success:function(e){if(console.log(e),document.getElementById("result").innerHTML="",document.getElementById("aboutPage").innerHTML="",0!=source&&0==e.totalResults&&"[object HTMLInputElement]"!=search){for(var a=0;a<sources.length;a++)sources[a].code===source&&(sourceName=sources[a].name);document.getElementById("result").innerHTML="The news source "+sourceName+'does not have any articles with the word "'+search+'"'}if(0!=source&&0==e.totalResults){for(a=0;a<languages.length;a++)languages[a].code===language&&(languageName=languages[a].name);for(a=0;a<sources.length;a++)sources[a].code===source&&(sourceName=sources[a].name);document.getElementById("result").innerHTML="The news source "+sourceName+" is unavaliable in "+languageName+"."}else if(0<e.totalResults)for(a=0;a<e.articles.length;a++){var n=e.articles[a].author;n=null==n&&null==e.articles[a].source.name?(console.log(n+"1"),"Author: Unkown"):null==n?(console.log(n+"2"),"Source: "+e.articles[a].source.name):(console.log(n+"3"),"Author: "+n),console.log(a),document.getElementById("result").innerHTML+='<div class="card plagItem cardFix"><img onerror="backupNews(this)" src="'+e.articles[a].urlToImage+'" class="card-img-top" alt="..."><div class="card-body"><h5 class="card-title">'+n+'</h5><p class="card-text">'+e.articles[a].title+'</p><a href="'+e.articles[a].url+'" class="btn btn-primary">View Story</a></div></div>'}else document.getElementById("result").innerHTML="The querys you have entered don't appear to have any results."},error:function(){console.log("error")}})}function backupNews(e){return e.src="assets/images/backupNews.jpg",!(e.onerror="")}console.log(myKey[0]),myKey=myKey[0].key,buildURL(),$("#category").change(function(){0!==$("#category").val()&&($("#source").attr("disabled",!0),$("#language").attr("disabled",!0)),0==$("#category").val()&&0==$("#country").val()&&($("#source").attr("disabled",!1),$("#language").attr("disabled",!1))}),$("#country").change(function(){0!==$("#country").val()&&($("#source").attr("disabled",!0),$("#language").attr("disabled",!0)),0==$("#country").val()&&0==$("#category").val()&&($("#source").attr("disabled",!1),$("#language").attr("disabled",!1))}),$("#source").change(function(){console.log($("#source").val()),0!==$("#source").val()&&($("#category").attr("disabled",!0),$("#country").attr("disabled",!0)),0==$("#source").val()&&0==$("#language").val()&&($("#category").attr("disabled",!1),$("#country").attr("disabled",!1))}),$("#language").change(function(){0!==$("#language").val()&&($("#category").attr("disabled",!0),$("#country").attr("disabled",!0)),0==$("#language").val()&&0==$("#source").val()&&($("#category").attr("disabled",!1),$("#country").attr("disabled",!1))}),document.getElementById("about").addEventListener("click",function(){console.log("click"),document.getElementById("result").innerHTML="",document.getElementById("aboutPage").innerHTML='<div class="preheading"><h7>My Name is</h7></div><div class="heading"><h1>James Murray</h1></div><br><br><div class="imageShot"><img class="imgFix" src="assets/images/profile.jpg" alt="Profile Picture"></div><br><br><p>For this assignment I was required to show my ability to use APIS in websites.</p><p>I used <a class="badge badge-info" href="https://newsapi.org/" role="button">News API</a> in order to get the APIS which you can see by searching for anything.</p>'}),document.getElementById("submit").addEventListener("click",function(){category=document.getElementById("category").value,country=document.getElementById("country").value,source=document.getElementById("source").value,language=document.getElementById("language").value,search=document.getElementById("search").value,buildURL()});